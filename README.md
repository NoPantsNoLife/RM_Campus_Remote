# RM_Campus_Remote

## 开发说明

因为PS2遥控器太渣（摇杆只有8bit，2.4G频段用户较多，没有绑定机制，没有办法定制数据传输等），利用其外壳，开发了这个遥控器项目。

## 功能

### 基本的摇杆和按键功能

全模拟量摇杆，正常按键

### 串口通信，附加数据传输

数据包格式可自定义，可传输附加数据。本例中用数据包同时传送了PID整定参数给接收端，配合适当的上位机和接收端代码，可以实现对PID参数的实时调整

## 电路说明

因工期紧张没有单独打板，按键和摇杆板子是在原有PS2遥控器的基础上，把黑胶封装（也叫软封装，也叫牛屎封装）的主控芯片加热后铲掉，飞线后封胶固定做成的。MCU在一块最小系统板上，RF模块自己有一个模块PCB，射频部分是飞了一根同轴线连接的，

原理图中的按键等连接方式仅供参考，实际与哪个按键对应并不重要（我忘了），在程序中很容易修正

供电采用锂电池降压到3.3V，降压电路为TLV62569，模块是洞洞板紧急搭的

锂电池充电模块TP4056

引出接口加了ESD二极管避免静电击穿



## 程序简述

关于SX1231驱动请看https://github.com/NoPantsNoLife/SX1231_STM32_Driver

整个项目是STM32CubeMX生成的，全部使用LL库

模拟量摇杆的电压值用ADC采样，循环DMA传输到内存里，需要发送的时候直接取

USART接收到的数据也用DMA放到内存里，目前是24个字节，即留出一共4组PID参数的位置，每组PID参数占了6个字节

上位机软件的工作就是不断地向下位机发送这24个字节

按键的状态读取后，用位操作拼成两个字节

所有数据准备好后通过SX1231模块发送出去，只要遥控器有电就不停发送